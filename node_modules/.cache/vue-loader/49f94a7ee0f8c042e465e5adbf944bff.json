{"remainingRequest":"/Users/daw/Git-Hub/vuefirebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daw/Git-Hub/vuefirebase/src/components/Principal.vue?vue&type=style&index=0&id=6631a12e&scoped=true&lang=css&","dependencies":[{"path":"/Users/daw/Git-Hub/vuefirebase/src/components/Principal.vue","mtime":1581341584213},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5wcmluY2lwYWwgewoKfQouY29sb3J7CiAgY29sb3I6YmxhY2s7Cn0K"},{"version":3,"sources":["Principal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;;AAEA;AACA;AACA;AACA","file":"Principal.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\n\n  <section class=\"principal\">\n    <div>\n      <nav class=\"navbarnavbar-dark bg-primary color\">\n          <a  class=\"navbar-brand\">Ejemplo Vue+Firebase</a>\n        <div class=\"btn-group\">\n          <button type=\"button\" class=\"btn btn-secondary dropdown-toggle\" data-toggle=\"dropdown\" data-display=\"static\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            {{usuario}}\n          </button>\n          <div class=\"dropdown-menu dropdown-menu-lg-right\">\n            <button class=\"dropdown-item\" type=\"button\">Salir</button>\n          </div>\n        </div>\n      </nav>\n      <div class=\"container m-0\">\n          <div class=\"row mt-5\">\n              <div class=\"col-sm-5\">\n                  <div class=\"card\" style=\"width: 100%;\">\n                      <div class=\"card-header\">\n                          Agrega una nueva tarea\n                          <div class=\"card-body\">\n                              <form @submit.prevent=\"addNota\">\n                                  <div class=\"form-group\">\n                                      <input type=\"text\" class=\"form-control\" v-model=\"nuevaNota.Tarea\" placeholder=\"Tarea\">\n                                      <!--<input type=\"text\" class=\"form-control\" v-model=\"nuevaNota.Autor\" placeholder=\"Autor\">-->\n                                      <div>\n                                        <!-- Styled -->\n                                        <b-form-file\n                                          v-model=\"nuevaNota.archivo\"\n                                          :state=\"Boolean(nuevaNota.archivo)\"\n                                          placeholder=\"Choose a file or drop it here...\"\n                                          drop-placeholder=\"Drop file here...\"\n                                          @change=\"archivoSeleccionado\"\n                                        ></b-form-file>\n\n                                        \n                                        <!--<input type=\"file\" @change=\"archivoSeleccionado\" />-->\n\n                                       \n                                      </div>\n                                      <button type=\"submit\" class=\"btn btn-primary\">Subir</button>\n                                  </div>\n                              </form>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n              <div class=\"col-sm-7 text-center \">\n                  <div class=\"card \" style=\"width: 100%\">\n                      <div class=\"card-header\">\n                          Lista Tareas\n                          <div class=\"card-body\">\n                              <table class=\"table table-stripped table-bordered\">\n                                <thead>\n                                  <tr>\n                                    <td><b>Tarea</b></td>\n                                    <td><b>Autor</b></td>\n                                    <td><b>Archivo</b></td>\n                                    <td><b>Operaciones</b></td>\n\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  <tr v-for=\"nota in listaNotas\" v-bind:key=\"nota.Tarea\">\n                                    <td>{{nota.Tarea}}</td>\n                                    <td>{{nota.Autor}}</td>\n                                    <td><a :href=\"nota.Archivo.url\">{{nota.Archivo.name}}</a></td>\n                                    <td>\n                                      <b-button variant=\"danger\" v-on:click=\"delNota(nota)\">Eliminar</b-button>\n                                    </td>\n                                  </tr>\n                                </tbody>\n                              </table>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n    </div>\n\n  </section>\n\n</template>\n\n<script lang=\"js\">\nimport { db } from '../db.js'\nimport firebase from 'firebase';\n\n  export default  {\n    name: 'principal',\n    props: [],\n    mounted () {\n\n    },\n    data () {\n      return {\n        listaNotas:[],\n        nuevaNota:{\n          Tarea:\"\", \n          Archivo:{\n            name:null,\n            url:null\n          }\n        }\n      }\n    },\n    firestore: {\n      listaNotas: db.collection('notas'),\n    },\n    methods: {\n      archivoSeleccionado(event) {\n        this.nuevaNota.Archivo = event.target.files[0];\n      },\n      addNota:function(){\n\n\n        \n        this.onUpload()\n        db.collection('notas').add(\n          {\n            Tarea: this.nuevaNota.Tarea,\n            Autor: firebase.auth().currentUser.email,\n            Archivo:{\n              name:this.nuevaNota.Archivo.name,\n              url:this.nuevaNota.Archivo.url\n            }\n          }\n        )\n      },\n      onUpload(){\n\n        const storageRef = firebase.storage().ref(`${this.nuevaNota.Archivo.name}`).put(this.nuevaNota.Archivo);\n        storageRef.on(`state_changed`,snapshot=>{\n          this.uploadValue = (snapshot.bytesTransferred/snapshot.totalBytes)*100;\n        }, error=>{console.log(error.message)},\n        ()=>{this.uploadValue=100;\n          storageRef.snapshot.ref.getDownloadURL().then((url)=>{\n            if (url == null) {\n              this.addNota()\n            }else{\n              this.nuevaNota.Archivo.url = url;\n\n            }\n          });\n        }      \n      )},\n      delNota:(nota) => {\n        db.collection('notas').doc(nota.id).delete()\n      },\n\n      singOuth:()=>{\n        db.auth().signOut();\n        \n      }\n\n    },\n    computed: {\n        usuario:()=>{\n          return firebase.auth().currentUser.email;\n        }\n    }\n}\n\n\n</script>\n\n<style scoped lang=\"css\">\n  .principal {\n\n  }\n  .color{\n    color:black;\n  }\n</style>\n"]}]}