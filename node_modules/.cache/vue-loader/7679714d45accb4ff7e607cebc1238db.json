{"remainingRequest":"/Users/daw/Git-Hub/vuefirebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daw/Git-Hub/vuefirebase/src/components/Principal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daw/Git-Hub/vuefirebase/src/components/Principal.vue","mtime":1581341584213},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9kYi5qcycKaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJzsKCiAgZXhwb3J0IGRlZmF1bHQgIHsKICAgIG5hbWU6ICdwcmluY2lwYWwnLAogICAgcHJvcHM6IFtdLAogICAgbW91bnRlZCAoKSB7CgogICAgfSwKICAgIGRhdGEgKCkgewogICAgICByZXR1cm4gewogICAgICAgIGxpc3RhTm90YXM6W10sCiAgICAgICAgbnVldmFOb3RhOnsKICAgICAgICAgIFRhcmVhOiIiLCAKICAgICAgICAgIEFyY2hpdm86ewogICAgICAgICAgICBuYW1lOm51bGwsCiAgICAgICAgICAgIHVybDpudWxsCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZmlyZXN0b3JlOiB7CiAgICAgIGxpc3RhTm90YXM6IGRiLmNvbGxlY3Rpb24oJ25vdGFzJyksCiAgICB9LAogICAgbWV0aG9kczogewogICAgICBhcmNoaXZvU2VsZWNjaW9uYWRvKGV2ZW50KSB7CiAgICAgICAgdGhpcy5udWV2YU5vdGEuQXJjaGl2byA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgfSwKICAgICAgYWRkTm90YTpmdW5jdGlvbigpewoKCiAgICAgICAgCiAgICAgICAgdGhpcy5vblVwbG9hZCgpCiAgICAgICAgZGIuY29sbGVjdGlvbignbm90YXMnKS5hZGQoCiAgICAgICAgICB7CiAgICAgICAgICAgIFRhcmVhOiB0aGlzLm51ZXZhTm90YS5UYXJlYSwKICAgICAgICAgICAgQXV0b3I6IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci5lbWFpbCwKICAgICAgICAgICAgQXJjaGl2bzp7CiAgICAgICAgICAgICAgbmFtZTp0aGlzLm51ZXZhTm90YS5BcmNoaXZvLm5hbWUsCiAgICAgICAgICAgICAgdXJsOnRoaXMubnVldmFOb3RhLkFyY2hpdm8udXJsCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgIH0sCiAgICAgIG9uVXBsb2FkKCl7CgogICAgICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKGAke3RoaXMubnVldmFOb3RhLkFyY2hpdm8ubmFtZX1gKS5wdXQodGhpcy5udWV2YU5vdGEuQXJjaGl2byk7CiAgICAgICAgc3RvcmFnZVJlZi5vbihgc3RhdGVfY2hhbmdlZGAsc25hcHNob3Q9PnsKICAgICAgICAgIHRoaXMudXBsb2FkVmFsdWUgPSAoc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZC9zbmFwc2hvdC50b3RhbEJ5dGVzKSoxMDA7CiAgICAgICAgfSwgZXJyb3I9Pntjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKX0sCiAgICAgICAgKCk9Pnt0aGlzLnVwbG9hZFZhbHVlPTEwMDsKICAgICAgICAgIHN0b3JhZ2VSZWYuc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbigodXJsKT0+ewogICAgICAgICAgICBpZiAodXJsID09IG51bGwpIHsKICAgICAgICAgICAgICB0aGlzLmFkZE5vdGEoKQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICB0aGlzLm51ZXZhTm90YS5BcmNoaXZvLnVybCA9IHVybDsKCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gICAgICAKICAgICAgKX0sCiAgICAgIGRlbE5vdGE6KG5vdGEpID0+IHsKICAgICAgICBkYi5jb2xsZWN0aW9uKCdub3RhcycpLmRvYyhub3RhLmlkKS5kZWxldGUoKQogICAgICB9LAoKICAgICAgc2luZ091dGg6KCk9PnsKICAgICAgICBkYi5hdXRoKCkuc2lnbk91dCgpOwogICAgICAgIAogICAgICB9CgogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgdXN1YXJpbzooKT0+ewogICAgICAgICAgcmV0dXJuIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci5lbWFpbDsKICAgICAgICB9CiAgICB9Cn0KCgo="},{"version":3,"sources":["Principal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Principal.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\n\n  <section class=\"principal\">\n    <div>\n      <nav class=\"navbarnavbar-dark bg-primary color\">\n          <a  class=\"navbar-brand\">Ejemplo Vue+Firebase</a>\n        <div class=\"btn-group\">\n          <button type=\"button\" class=\"btn btn-secondary dropdown-toggle\" data-toggle=\"dropdown\" data-display=\"static\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            {{usuario}}\n          </button>\n          <div class=\"dropdown-menu dropdown-menu-lg-right\">\n            <button class=\"dropdown-item\" type=\"button\">Salir</button>\n          </div>\n        </div>\n      </nav>\n      <div class=\"container m-0\">\n          <div class=\"row mt-5\">\n              <div class=\"col-sm-5\">\n                  <div class=\"card\" style=\"width: 100%;\">\n                      <div class=\"card-header\">\n                          Agrega una nueva tarea\n                          <div class=\"card-body\">\n                              <form @submit.prevent=\"addNota\">\n                                  <div class=\"form-group\">\n                                      <input type=\"text\" class=\"form-control\" v-model=\"nuevaNota.Tarea\" placeholder=\"Tarea\">\n                                      <!--<input type=\"text\" class=\"form-control\" v-model=\"nuevaNota.Autor\" placeholder=\"Autor\">-->\n                                      <div>\n                                        <!-- Styled -->\n                                        <b-form-file\n                                          v-model=\"nuevaNota.archivo\"\n                                          :state=\"Boolean(nuevaNota.archivo)\"\n                                          placeholder=\"Choose a file or drop it here...\"\n                                          drop-placeholder=\"Drop file here...\"\n                                          @change=\"archivoSeleccionado\"\n                                        ></b-form-file>\n\n                                        \n                                        <!--<input type=\"file\" @change=\"archivoSeleccionado\" />-->\n\n                                       \n                                      </div>\n                                      <button type=\"submit\" class=\"btn btn-primary\">Subir</button>\n                                  </div>\n                              </form>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n              <div class=\"col-sm-7 text-center \">\n                  <div class=\"card \" style=\"width: 100%\">\n                      <div class=\"card-header\">\n                          Lista Tareas\n                          <div class=\"card-body\">\n                              <table class=\"table table-stripped table-bordered\">\n                                <thead>\n                                  <tr>\n                                    <td><b>Tarea</b></td>\n                                    <td><b>Autor</b></td>\n                                    <td><b>Archivo</b></td>\n                                    <td><b>Operaciones</b></td>\n\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  <tr v-for=\"nota in listaNotas\" v-bind:key=\"nota.Tarea\">\n                                    <td>{{nota.Tarea}}</td>\n                                    <td>{{nota.Autor}}</td>\n                                    <td><a :href=\"nota.Archivo.url\">{{nota.Archivo.name}}</a></td>\n                                    <td>\n                                      <b-button variant=\"danger\" v-on:click=\"delNota(nota)\">Eliminar</b-button>\n                                    </td>\n                                  </tr>\n                                </tbody>\n                              </table>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n    </div>\n\n  </section>\n\n</template>\n\n<script lang=\"js\">\nimport { db } from '../db.js'\nimport firebase from 'firebase';\n\n  export default  {\n    name: 'principal',\n    props: [],\n    mounted () {\n\n    },\n    data () {\n      return {\n        listaNotas:[],\n        nuevaNota:{\n          Tarea:\"\", \n          Archivo:{\n            name:null,\n            url:null\n          }\n        }\n      }\n    },\n    firestore: {\n      listaNotas: db.collection('notas'),\n    },\n    methods: {\n      archivoSeleccionado(event) {\n        this.nuevaNota.Archivo = event.target.files[0];\n      },\n      addNota:function(){\n\n\n        \n        this.onUpload()\n        db.collection('notas').add(\n          {\n            Tarea: this.nuevaNota.Tarea,\n            Autor: firebase.auth().currentUser.email,\n            Archivo:{\n              name:this.nuevaNota.Archivo.name,\n              url:this.nuevaNota.Archivo.url\n            }\n          }\n        )\n      },\n      onUpload(){\n\n        const storageRef = firebase.storage().ref(`${this.nuevaNota.Archivo.name}`).put(this.nuevaNota.Archivo);\n        storageRef.on(`state_changed`,snapshot=>{\n          this.uploadValue = (snapshot.bytesTransferred/snapshot.totalBytes)*100;\n        }, error=>{console.log(error.message)},\n        ()=>{this.uploadValue=100;\n          storageRef.snapshot.ref.getDownloadURL().then((url)=>{\n            if (url == null) {\n              this.addNota()\n            }else{\n              this.nuevaNota.Archivo.url = url;\n\n            }\n          });\n        }      \n      )},\n      delNota:(nota) => {\n        db.collection('notas').doc(nota.id).delete()\n      },\n\n      singOuth:()=>{\n        db.auth().signOut();\n        \n      }\n\n    },\n    computed: {\n        usuario:()=>{\n          return firebase.auth().currentUser.email;\n        }\n    }\n}\n\n\n</script>\n\n<style scoped lang=\"css\">\n  .principal {\n\n  }\n  .color{\n    color:black;\n  }\n</style>\n"]}]}