{"remainingRequest":"/Users/daw/Git-Hub/vuefirebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daw/Git-Hub/vuefirebase/src/components/Principal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daw/Git-Hub/vuefirebase/src/components/Principal.vue","mtime":1581197385447},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daw/Git-Hub/vuefirebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZGIuanMnCmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7CgogIGV4cG9ydCBkZWZhdWx0ICB7CiAgICBuYW1lOiAncHJpbmNpcGFsJywKICAgIHByb3BzOiBbXSwKICAgIG1vdW50ZWQgKCkgewoKICAgIH0sCiAgICBkYXRhICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBsaXN0YU5vdGFzOltdLAogICAgICAgIC8qYXJjaGl2bzp7CiAgICAgICAgICBuYW1lOm51bGwsCiAgICAgICAgICB1cmw6bnVsbAogICAgICAgIH0sKi8KICAgICAgICBudWV2YU5vdGE6ewogICAgICAgICAgVGFyZWE6IiIsIAogICAgICAgICAgQXJjaGl2bzp7CiAgICAgICAgICAgIG5hbWU6bnVsbCwKICAgICAgICAgICAgdXJsOm51bGwKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBmaXJlc3RvcmU6IHsKICAgICAgbGlzdGFOb3RhczogZGIuY29sbGVjdGlvbignbm90YXMnKSwKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIGFyY2hpdm9TZWxlY2Npb25hZG8oZXZlbnQpIHsKICAgICAgICB0aGlzLkFyY2hpdm8gPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIH0sCiAgICAgIGFkZE5vdGE6ZnVuY3Rpb24oKXsKCiAgICAgIC8qZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZih0aGlzLkFyY2hpdm8ubmFtZSkucHV0KHRoaXMuQXJjaGl2byk7ewogICAgICBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCkuY2hpbGQodGhpcy5BcmNoaXZvLm5hbWUpLmdldERvd25sb2FkVVJMKCkudGhlbigKICAgICAgICB1cmwgPT57CiAgICAgICAgICBpZih0aGlzLm51ZXZhTm90YS5UYXJlYSAhPSAiIiAmJiB0aGlzLkFyY2hpdm8gIT0gbnVsbCl7CiAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ25vdGFzJykuYWRkKHsKICAgICAgICAgICAgICBUYXJlYTogdGhpcy5udWV2YU5vdGEuVGFyZWEsCiAgICAgICAgICAgICAgQXV0b3I6ICdsZCcsLy9maXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZW1haWwsCiAgICAgICAgICAgICAgQXJjaGl2bzogewogICAgICAgICAgICAgICAgbm9tYnJlOiB0aGlzLkFyY2hpdm8ubmFtZSwKICAgICAgICAgICAgICAgIHVybDogdXJsCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5udWV2YU5vdGEuVGFyZWEgPSAiIjsKICAgICAgICAgIH0KICAgICAgICB9KX0qLwoKICAgICAgLypmaXJlYmFzZS5zdG9yYWdlKCkucmVmKGAke3RoaXMuQXJjaGl2by5uYW1lfWApLnB1dCh0aGlzLkFyY2hpdm8pO3sKICAgICAgICBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCkuY2hpbGQodGhpcy5BcmNoaXZvLm5hbWUpLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgICAgLnRoZW4oCiAgICAgICAgICAgICAgICB1cmwgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubnVldmFOb3RhLlRhcmVhKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLkFyY2hpdm8udXJsID0gdXJsCiAgICAgICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbignbm90YXMnKS5hZGQoewogICAgICAgICAgICAgICAgICAgICAgICBUZXh0bzogdGhpcy5udWV2YU5vdGEuVGFyZWEsCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9yOidzZCcsLy8gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsLAogICAgICAgICAgICAgICAgICAgICAgICBBcmNoaXZvOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLkFyY2hpdm8ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy5BcmNoaXZvLnVybAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KX0qLwogICAgICAgLyogZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZihgJHt0aGlzLmFyY2hpdm8ubmFtZX1gKS5wdXQodGhpcy5hcmNoaXZvKTt7CiAgICAgICAgZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpLmNoaWxkKHRoaXMuYXJjaGl2by5uYW1lKS5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24oKXsKICAgICAgICAgIHVybCA9PnsKICAgICAgICAgICAgdGhpcy5hcmNoaXZvLnVybCA9IHVybAogICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCdub3RhcycpLmFkZCgKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUZXh0bzp0aGlzLm51ZXZhTm90YS50YXJlYSwKICAgICAgICAgICAgICAgIEF1dG9yOnRoaXMubnVldmFOb3RhLmF1dG9yLC8vZmlyZWJhc2UuYXV0aCgpY3VycmVudFVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICBBcmNoaXZvOnsKICAgICAgICAgICAgICAgICAgTm9tYnJlOnRoaXMuYXJjaGl2by5uYW1lLAogICAgICAgICAgICAgICAgICBVUkw6dGhpcy5hcmNoaXZvLnVybAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKX0KICAgICAgICAgICAgdGhpcy5udWV2YU5vdGEudGFyZWEgPSAnJwogICAgICAgICAgICB0aGlzLm51ZXZhTm90YS5hdXRvciA9ICcnCgogICAgICAgIH0pO30qLwogICAgICAgIAogICAgICAgIHRoaXMub25VcGxvYWQoKQogICAgICAgIGRiLmNvbGxlY3Rpb24oJ25vdGFzJykuYWRkKAogICAgICAgICAgewogICAgICAgICAgICBUZXh0bzogdGhpcy5udWV2YU5vdGEudGFyZWEsCiAgICAgICAgICAgIEF1dG9yOiB0aGlzLnVzdWFyaW8sLy9maXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZW1haWwsCiAgICAgICAgICAgIEFyY2hpdm86ewogICAgICAgICAgICAgIE5vbWJyZTp0aGlzLmFyY2hpdm8ubmFtZSwKICAgICAgICAgICAgICBVUkw6dGhpcy5hcmNoaXZvLnVybAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKQogICAgICB9LAogICAgICBvblVwbG9hZCgpewoKICAgICAgICBjb25zdCBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZihgJHt0aGlzLkFyY2hpdm8ubmFtZX1gKS5wdXQodGhpcy5BcmNoaXZvKTsKICAgICAgICBzdG9yYWdlUmVmLm9uKGBzdGF0ZV9jaGFuZ2VkYCxzbmFwc2hvdD0+ewogICAgICAgICAgdGhpcy51cGxvYWRWYWx1ZSA9IChzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkL3NuYXBzaG90LnRvdGFsQnl0ZXMpKjEwMDsKICAgICAgICB9LCBlcnJvcj0+e2NvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpfSwKICAgICAgICAoKT0+e3RoaXMudXBsb2FkVmFsdWU9MTAwOwogICAgICAgICAgc3RvcmFnZVJlZi5zbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKCh1cmwpPT57CiAgICAgICAgICAgIHRoaXMuQXJjaGl2by51cmwgPSB1cmw7CiAgICAgICAgICB9KTsKICAgICAgICB9ICAgICAgCiAgICAgICl9LAogICAgICBkZWxOb3RhOihub3RhKSA9PiB7CiAgICAgICAgZGIuY29sbGVjdGlvbignbm90YXMnKS5kb2Mobm90YS5pZCkuZGVsZXRlKCkKICAgICAgfSwKCiAgICAgIHNpbmdPdXRoOigpPT57CiAgICAgICAgZGIuYXV0aCgpLnNpZ25PdXQoKTsKICAgICAgICAKICAgICAgfQoKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHVzdWFyaW86KCk9PnsKICAgICAgICAgIHJldHVybiBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZW1haWw7CiAgICAgICAgfQogICAgfQp9CgoK"},{"version":3,"sources":["Principal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Principal.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\n\n  <section class=\"principal\">\n    <div>\n      <nav class=\"navbarnavbar-dark bg-primary color\">\n          <a  class=\"navbar-brand\">Ejemplo Vue+Firebase</a>\n        <div class=\"btn-group\">\n          <button type=\"button\" class=\"btn btn-secondary dropdown-toggle\" data-toggle=\"dropdown\" data-display=\"static\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            {{usuario}}\n          </button>\n          <div class=\"dropdown-menu dropdown-menu-lg-right\">\n            <button class=\"dropdown-item\" type=\"button\">Salir</button>\n          </div>\n        </div>\n      </nav>\n      <div class=\"container m-0\">\n          <div class=\"row mt-5\">\n              <div class=\"col-sm-5\">\n                  <div class=\"card\" style=\"width: 100%;\">\n                      <div class=\"card-header\">\n                          Agrega una nueva tarea\n                          <div class=\"card-body\">\n                              <form @submit.prevent=\"addNota\">\n                                  <div class=\"form-group\">\n                                      <input type=\"text\" class=\"form-control\" v-model=\"nuevaNota.Tarea\" placeholder=\"Tarea\">\n                                      <!--<input type=\"text\" class=\"form-control\" v-model=\"nuevaNota.Autor\" placeholder=\"Autor\">-->\n                                      <div>\n                                        <!-- Styled -->\n                                        <b-form-file\n                                          v-model=\"archivo\"\n                                          :state=\"Boolean(archivo)\"\n                                          placeholder=\"Choose a file or drop it here...\"\n                                          drop-placeholder=\"Drop file here...\"\n                                          @change=\"archivoSeleccionado\"\n                                        ></b-form-file>\n                                          <div class=\"mt-3\">Selected file: {{archivo ? archivo.name : '' }}</div>\n\n                                        \n                                        <!--<input type=\"file\" @change=\"archivoSeleccionado\" />-->\n\n                                       \n                                      </div>\n                                      <button type=\"submit\" class=\"btn btn-primary\">Subir</button>\n                                  </div>\n                              </form>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n              <div class=\"col-sm-7 text-center \">\n                  <div class=\"card \" style=\"width: 100%\">\n                      <div class=\"card-header\">\n                          Lista Tareas\n                          <div class=\"card-body\">\n                              <table class=\"table table-stripped table-bordered\">\n                                <thead>\n                                  <tr>\n                                    <td><b>Tarea</b></td>\n                                    <td><b>Autor</b></td>\n                                    <td><b>Archivo</b></td>\n                                    <td><b>Operaciones</b></td>\n\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  <tr v-for=\"nota in listaNotas\" v-bind:key=\"nota.Tarea\">\n                                    <td>{{nota.Tarea}}</td>\n                                    <td>{{nota.Autor}}</td>\n                                    <td><a :href=\"note.Archivo.url\">{{note.Archivo.url}}</a></td>\n                                    <td>\n                                      <b-button variant=\"danger\" v-on:click=\"delNota(nota)\">Eliminar</b-button>\n                                    </td>\n                                  </tr>\n                                </tbody>\n                              </table>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n    </div>\n\n  </section>\n\n</template>\n\n<script lang=\"js\">\nimport { db } from '../db.js'\nimport firebase from 'firebase';\n\n  export default  {\n    name: 'principal',\n    props: [],\n    mounted () {\n\n    },\n    data () {\n      return {\n        listaNotas:[],\n        /*archivo:{\n          name:null,\n          url:null\n        },*/\n        nuevaNota:{\n          Tarea:\"\", \n          Archivo:{\n            name:null,\n            url:null\n          }\n        }\n      }\n    },\n    firestore: {\n      listaNotas: db.collection('notas'),\n    },\n    methods: {\n      archivoSeleccionado(event) {\n        this.Archivo = event.target.files[0];\n      },\n      addNota:function(){\n\n      /*firebase.storage().ref(this.Archivo.name).put(this.Archivo);{\n      firebase.storage().ref().child(this.Archivo.name).getDownloadURL().then(\n        url =>{\n          if(this.nuevaNota.Tarea != \"\" && this.Archivo != null){\n            db.collection('notas').add({\n              Tarea: this.nuevaNota.Tarea,\n              Autor: 'ld',//firebase.auth().currentUser.email,\n              Archivo: {\n                nombre: this.Archivo.name,\n                url: url\n              }\n            });\n            this.nuevaNota.Tarea = \"\";\n          }\n        })}*/\n\n      /*firebase.storage().ref(`${this.Archivo.name}`).put(this.Archivo);{\n        firebase.storage().ref().child(this.Archivo.name).getDownloadURL()\n            .then(\n                url => {\n                    console.log(this.nuevaNota.Tarea);\n                    this.Archivo.url = url\n                    db.collection('notas').add({\n                        Texto: this.nuevaNota.Tarea,\n                        Autor:'sd',// firebase.auth().currentUser.email,\n                        Archivo: {\n                            name: this.Archivo.name,\n                            url: this.Archivo.url\n                        }\n                    });\n          })}*/\n       /* firebase.storage().ref(`${this.archivo.name}`).put(this.archivo);{\n        firebase.storage().ref().child(this.archivo.name).getDownloadURL().then(function(){\n          url =>{\n            this.archivo.url = url\n            db.collection('notas').add(\n              {\n                Texto:this.nuevaNota.tarea,\n                Autor:this.nuevaNota.autor,//firebase.auth()currentUser.email,\n                Archivo:{\n                  Nombre:this.archivo.name,\n                  URL:this.archivo.url\n                }\n              }\n            )}\n            this.nuevaNota.tarea = ''\n            this.nuevaNota.autor = ''\n\n        });}*/\n        \n        this.onUpload()\n        db.collection('notas').add(\n          {\n            Texto: this.nuevaNota.tarea,\n            Autor: this.usuario,//firebase.auth().currentUser.email,\n            Archivo:{\n              Nombre:this.archivo.name,\n              URL:this.archivo.url\n            }\n          }\n        )\n      },\n      onUpload(){\n\n        const storageRef = firebase.storage().ref(`${this.Archivo.name}`).put(this.Archivo);\n        storageRef.on(`state_changed`,snapshot=>{\n          this.uploadValue = (snapshot.bytesTransferred/snapshot.totalBytes)*100;\n        }, error=>{console.log(error.message)},\n        ()=>{this.uploadValue=100;\n          storageRef.snapshot.ref.getDownloadURL().then((url)=>{\n            this.Archivo.url = url;\n          });\n        }      \n      )},\n      delNota:(nota) => {\n        db.collection('notas').doc(nota.id).delete()\n      },\n\n      singOuth:()=>{\n        db.auth().signOut();\n        \n      }\n\n    },\n    computed: {\n        usuario:()=>{\n          return firebase.auth().currentUser.email;\n        }\n    }\n}\n\n\n</script>\n\n<style scoped lang=\"css\">\n  .principal {\n\n  }\n  .color{\n    color:black;\n  }\n</style>\n"]}]}